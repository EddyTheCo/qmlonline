import QtQuick 2.0
import nodeConection
import account
import outMonitor
import MyDesigns
import QtQuick.Controls

Item
{
    id:root
    anchors.fill:parent
    Component.onCompleted:
    {
        Node_Conection.nodeaddr="https://api.testnet.shimmer.network"
        Account.seed="9fe7bb0ec7cae8824ebb8c232338cb880a393b21bb4cbd7f35ab85d06ed84586"
    }

    MyButton {
        id:butt
        anchors.left:parent.left;
        anchors.verticalCenter:parent.verticalCenter
        enabled:Node_Conection.state 
        width: 75
        height:50
        text:"start"
        onClicked:
        {
            var filter="address="+Account.addr_bech32([0,0,0],Node_Conection.info().protocol.bech32Hrp)+"&hasNativeTokens=false";
            monitor.getRestBasicOuts(filter);
	    dialog.textarea.text+="Address:"+Account.addr_bech32([0,0,0],Node_Conection.info().protocol.bech32Hrp)+"\n";
        }
    }
    MyTextArea
    {
        id:dialog
        label.visible:false
        width:(parent.width-butt.width)*0.97
        height:400
        anchors.left:butt.right
        anchors.verticalCenter:root.verticalCenter
    }
    OutMonitor
    {
        id:monitor
        onGotNewOuts:function (vec,outs) {
            outs.forEach(function(obj) {
                dialog.textarea.text+=JSON.stringify(obj,null, 2);
            });
        }
    }


}

